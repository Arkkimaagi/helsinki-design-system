---
slug: '/components/login/components'
title: 'Login - Components'
---

import { Login } from 'hds-react';
import PlaygroundPreview from '../../../components/Playground';
import InternalLink from '../../../components/InternalLink';
import ExternalLink from '../../../components/ExternalLink';
import TabsLayout from './tabs.mdx';

export default ({ children, pageContext }) => <TabsLayout pageContext={pageContext}>{children}</TabsLayout>;

## Components

### LoginProvider

This component creates a React context and initialises all modules. All components and hooks are required to render inside the LoginProvider or React Context will throw an error.

### Properties

| Property                                             | Description                                                                                                                                                                                                                                           |
| ---------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `userManagerSettings`                                | Required. <InternalLink href="/components/login/modules#default-settings">Settings for the Oidc client.</InternalLink>                                                                                                                                |
| `apiTokensClientSettings`                            | Optional. <InternalLink href="/components/login/modules#settings-1">Settings for the Api tokens client.</InternalLink>If omitted, the api tokens client is not created.                                                                               |
| `sessionPollerSettings`                              | Optional. <InternalLink href="/components/login/modules#settings-2">Settings for the Session poller.</InternalLink>If omitted, the Session poller is not created. If default values are acceptable, an empty object is required to create the poller. |
| `debug`                                              | Optional. If true, debugging is enabled. See <InternalLink href="/components/login/modules#settings">Oidc client settings.</InternalLink>                                                                                                             |
| `modules`                                            | Optional. An array of <InternalLink href="/components/login/customisation">custom modules</InternalLink>.                                                                                                                                             |
| [Table 1: Properties of the LoginProvider component] |

<PlaygroundPreview>

```jsx
const providerProperties: LoginProviderProps = {
  userManagerSettings: {
    authority: 'https://tunnistamo.dev.hel.ninja/',
    client_id: 'exampleapp-ui-dev',
    scope: 'openid profile email',
    redirect_uri: 'https://service.fi/callback',
  },
  apiTokensClientSettings: { url: 'https://tunnistamo.dev.hel.ninja/api-tokens/' },
  sessionPollerSettings: { pollIntervalInMs: 300000 },
};

<LoginProvider {...providerProperties}>
  <p>Hello!</p>
</LoginProvider>;
```

</PlaygroundPreview>

### LoginButton

The login button handles the redirection to the OIDC server and also errors if the server rejects the request for <ExternalLink href="https://tunnistamo.dev.hel.ninja/.well-known/openid-configuration">openID configuration</ExternalLink>.

### Properties

| Property                                           | Description                                                       | Default            |
| -------------------------------------------------- | ----------------------------------------------------------------- | ------------------ |
| `errorText`                                        | Required. Error text shown, if OIDC server rejects the connection | none               |
| `spinnerColor`                                     | Optional. Colour of the loading spinner.                          | var(--color-white) |
| [Table 2: Properties of the LoginButton component] |

Button text passed and rendered as a child.

<PlaygroundPreview>

```jsx
<LoginButton errorText="Login failed. Try again!">Log in</LoginButton>
```

</PlaygroundPreview>

### LoginCallbackHandler

When the OIDC server redirects the browser back to the given callback route, this component handles the response.

### Properties

| Property                                                    | Description                                                                                                          |
| ----------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------- |
| `onSuccess`                                                 | Required. The function is called when a response is handled successfully. The function is called with a User object. |
| `onError`                                                   | Required. The function is called when a login fails. The function is called with an OidcClientError.                 |
| `children`                                                  | Optional. Usually child elements to inform the user that a response is being processed.                              |
| [Table 3: Properties of the LoginCallbackHandler component] |

<PlaygroundPreview>

```jsx
const onSuccess = (user: User) => {
  // handle success
  // Usually redirect to a page
};
const onError = (error: OidcClientError) => {
  // handle error
};
return (
  <LoginProvider {...providerProperties}>
    <LoginCallbackHandler onSuccess={onSuccess} onError={onError}>
      <div>Logging in...</div>
    </LoginCallbackHandler>
  </LoginProvider>
);
```

</PlaygroundPreview>

### SessionEndedHandler

This component listens to the session ended signal. It is emitted from the Session poller, if it receives a response indicating the user's session has ended.
Then the component shows a dialog and forces the user to logout.

### Properties

| Property                                                   | Description                                                                                                       |
| ---------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------- |
| `content`                                                  | Required. Textual content with properties `title`, `text`, `buttonText` and `closeButtonLabelText`                |
| `ids`                                                      | Optional. Ids for the dialog elements with properties `dialog`, `title`, and `text`. If omitted, ids are created. |
| `dialogProps`                                              | Optional. Additional `DialogProps` passed to the Dialog                                                           |
| [Table 4: Properties of the SessionEndedHandler component] |

<PlaygroundPreview>

```jsx
<SessionEndedHandler
  content={{
    title: 'Session has ended!',
    text: 'Your session on the server has ended. You will be logged out in this window too.',
    buttonText: 'Logout',
    closeButtonLabelText: 'Logout',
  }}
/>
```

</PlaygroundPreview>

### WithAuthentication

Component for rendering child components conditionally, depending on is user authenticated or not.

### Properties

| Property                                                  | Description                                                                                             |
| --------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- |
| `AuthorisedComponent`                                     | Optional. Component to render, if the user is authenticated. The user object is passed to the component |
| `UnauthorisedComponent`                                   | Optional. Component to render, if the user is not authenticated.                                        |
| [Table 5: Properties of the WithAuthentication component] |

<PlaygroundPreview>

```jsx
const HelloUser = ({ user }: { user: User }) => {
  return <p>Hello, {user.name}!</p>;
};

const LoginComponent = () => {
  return <LoginButton errorText="Login failed. Try again!">Log in</LoginButton>;
};

<WithAuthentication AuthorisedComponent={HelloUser} UnauthorisedComponent={LoginComponent} />;
```

</PlaygroundPreview>

### WithAuthenticatedUser

Renders its children only, if the user is authenticated. Uses `WithAuthentication`.

### Properties

| Property                                                     | Description                                           |
| ------------------------------------------------------------ | ----------------------------------------------------- |
| `children`                                                   | React children. A user object is passed to each child |
| [Table 6: Properties of the WithAuthenticatedUser component] |

<PlaygroundPreview>

```jsx
<WithAuthenticatedUser>
  <p>This is rendered, if the user is authenticated</p>
</WithAuthenticatedUser>
```

</PlaygroundPreview>

### WithoutAuthenticatedUser

Renders its children only, if the user is not authenticated. Uses `WithAuthentication`.

### Properties

| Property                                                     | Description     |
| ------------------------------------------------------------ | --------------- |
| `children`                                                   | React children. |
| [Table 7: Properties of the WithAuthenticatedUser component] |

<PlaygroundPreview>

```jsx
<WithoutAuthenticatedUser>
  <p>This is rendered, if the user is not authenticatedd</p>
</WithoutAuthenticatedUser>
```

</PlaygroundPreview>
